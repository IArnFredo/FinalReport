<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Review Module</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Segoe UI", sans-serif;
        background-color: #f0f2f5;
        margin: 0;
        padding: 0;
      }
      header {
        background-color: #1a73e8;
        color: white;
        padding: 15px 30px;
      }
      nav ul {
        display: flex;
        gap: 30px;
        list-style: none;
        margin: 0;
        padding: 0;
      }
      nav li {
        cursor: pointer;
        font-weight: bold;
      }
      .container {
        padding: 40px 30px;
        max-width: 1000px;
        margin: 0 auto;
      }
      section {
        background-color: white;
        border-radius: 10px;
        padding: 20px 30px;
        margin-bottom: 30px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      }
      h2 {
        color: #1a73e8;
      }
      .progress-bar {
        height: 10px;
        background-color: #e0e0e0;
        border-radius: 5px;
        overflow: hidden;
        margin: 10px 0 20px;
      }
      .progress-bar > div {
        width: 0%;
        height: 100%;
        background-color: #1a73e8;
        transition: width 0.5s ease;
      }
      .toggle-view {
        text-align: right;
        margin-top: -36px;
        margin-bottom: 10px;
      }
      .toggle-view span {
        margin-left: 20px;
        font-weight: bold;
        color: #1a73e8;
      }
      .review-item {
        border: 1px solid #ddd;
        border-radius: 10px;
        padding: 16px;
        margin-bottom: 15px;
        background-color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .review-item p {
        margin: 4px 0;
      }
      .review-item a {
        color: #1a73e8;
        font-weight: bold;
        text-decoration: none;
        font-size: 13px;
      }
      .crystals {
        display: flex;
        gap: 20px;
        margin-top: 30px;
      }
      .crystal {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
      }
      .crystal i {
        font-size: 40px;
      }
      .green {
        color: #34a853;
      }
      .blue {
        color: #1a73e8;
      }
      .yellow {
        color: #fbbc04;
      }
      .red {
        color: #ea4335;
      }
    </style>
  </head>
  <body>
    <header>
      <nav>
        <ul>
          <li onclick="navigate('vpen_ui_homepage.html')">Home</li>
          <li onclick="navigate('vpen_ui_annotation.html')">Annotations</li>
          <li onclick="navigate('vpen_ui_homework.html')">Homework</li>
          <li onclick="showSignOutModal()">Sign Out</li>
        </ul>
      </nav>
    </header>
    <div class="container">
      <section>
        <h2>My Review Plan</h2>
        <div class="progress-bar"><div id="progressFill"></div></div>
        <div class="toggle-view">
          <span>Daily</span>
          <span style="color: #888; font-weight: normal">Weekly</span>
        </div>
        <div class="review-item">
          <div>
            <strong>Quadratic Functions</strong>
            <p>Explain this concept in your own words.</p>
            <div style="font-size: 14px; color: #555; margin-top: 8px">
              <em>Past Annotation:</em><br />
              "The roots of a quadratic can be found using the discriminant.
              Still unclear about completing the square."
            </div>
            <a href="vpen_ui_review.html">üîç View Full Annotation</a>
          </div>
          <button onclick="reviewCrystal('crystal1', 1)">Review</button>
        </div>
        <div class="review-item">
          <div>
            <strong>Algebraic Expressions</strong>
            <p>How does this problem relate to polynomials?</p>
            <div style="font-size: 14px; color: #555; margin-top: 8px">
              <em>Past Annotation:</em><br />
              "Need to remember rules for expanding (a+b)^2. Might be confusing
              with like terms."
            </div>
            <a href="vpen_ui_review.html">üîç View Full Annotation</a>
          </div>
          <button onclick="reviewCrystal('crystal2', 2)">Review</button>
        </div>
        <div class="review-item">
          <div>
            <strong>Trigonometry</strong>
            <p>What was your main confusion point here?</p>
            <div style="font-size: 14px; color: #555; margin-top: 8px">
              <em>Past Annotation:</em><br />
              "Was unsure about when to use sine vs cosine rule. Practice
              helped."
            </div>
            <a href="vpen_ui_review.html">üîç View Full Annotation</a>
          </div>
          <button onclick="reviewCrystal('crystal3', 3)">Review</button>
        </div>
      </section>
      <section>
        <h2>Knowledge Crystals</h2>
        <div class="crystals">
          <div class="crystal" id="crystal1">
            <i class="bi bi-gem red"></i>
            <p>Quadratic</p>
          </div>
          <div class="crystal" id="crystal2">
            <i class="bi bi-gem yellow"></i>
            <p>Algebra</p>
          </div>
          <div class="crystal" id="crystal3">
            <i class="bi bi-gem blue"></i>
            <p>Trig</p>
          </div>
        </div>
        <div
          class="legend"
          style="
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 10px;
          "
        >
          <strong>Color Legend</strong>
          <p style="margin-top: 10px">
            <span style="color: #34a853">üü¢</span> Fresh knowledge
          </p>
          <p><span style="color: #1a73e8">üîµ</span> Due for review soon</p>
          <p><span style="color: #fbbc04">üü°</span> Fading memory</p>
          <p><span style="color: #ea4335">üî¥</span> At risk of forgetting</p>
        </div>
      </section>
    </div>

    <div
      id="signOutModal"
      class="modal"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.4);
      "
    >
      <div
        class="modal-content"
        style="
          background: #fff;
          padding: 20px;
          border-radius: 8px;
          max-width: 300px;
          margin: 20% auto;
          text-align: center;
        "
      >
        <h4>Your account has been signed out.</h4>
        <button onclick="closeSignOutModal()">Close</button>
      </div>
    </div>

    <div
      id="reviewModal"
      class="modal"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.4);
      "
    >
      <div
        class="modal-content"
        style="
          background: #fff;
          padding: 20px;
          border-radius: 8px;
          max-width: 300px;
          margin: 20% auto;
          text-align: center;
        "
      >
        <h4>Review Complete!</h4>
        <p>You reviewed this topic.</p>
        <button onclick="closeReviewModal()">Close</button>
      </div>
    </div>

    <script>
      let reviewedTopics = 0;

      function navigate(page) {
        document.body.classList.add("fade-out");
        setTimeout(() => {
          window.location.href = page;
        }, 400);
      }
      function showSignOutModal() {
        document.getElementById("signOutModal").style.display = "block";
      }
      function closeSignOutModal() {
        document.getElementById("signOutModal").style.display = "none";
      }
      function reviewCrystal(id, index) {
        const crystal = document.getElementById(id).querySelector("i");
        if (!crystal.classList.contains("green")) {
          crystal.className = "bi bi-gem green";
          reviewedTopics++;
          updateProgress();
          document.getElementById("reviewModal").style.display = "block";
        }
      }
      function closeReviewModal() {
        document.getElementById("reviewModal").style.display = "none";
      }
      function updateProgress() {
        const percent = Math.min((reviewedTopics / 3) * 100, 100);
        document.getElementById("progressFill").style.width = percent + "%";
      }
    </script>
  </body>
</html>
